module.exports = function (app) {

    var fs = require("fs");
    var S = require('string');
    var Midi = require('jsmidgen');

    var startNote = 36; // C2
    var interval = 3;
    var scale = {};
    var alphabet = [ 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z' ];
    var notes = 'C C#D D#E E#F F#G G#A A#B ';

    for(var i=0; i < 26; i++){
        var midinote = startNote + (interval*i);
        var octave = Math.floor(midinote/12 -1);
        var note = notes.substring((midinote % 12) * 2, (midinote % 12) *2 + 2);
        scale[alphabet[i]] = note.replace(' ', '') + octave;
    }

    app.post('/texttomidi', function(req,res) {
        var textToConvert = req.body.textToConvert;

        var textStats = [];
        var file = new Midi.File();
        var track = new Midi.Track();
        track.setTempo(120);
        file.addTrack(track);

        textToConvert.split("\n").forEach(function(line){
            var wordCount = line.split(" ").length;

            var chars = {};
            var charsTotal = 0;
//            data.toLowerCase().replace( /[^a-z]/g ,"").split("").forEach(function(c){
//                chars[c] ? ++chars[c] : chars[c] = 1; charsTotal++;
//            });
            line.replace( /[^a-zA-Z]/g ,"").split("").forEach(function(c){
                chars[c] ? ++chars[c] : chars[c] = 1; charsTotal++;
            });

            var nonchars = {};
            line.toLowerCase().replace( /[a-z]/g ,"").split("").sort().forEach(function(c){
                nonchars[c] ? ++nonchars[c] : nonchars[c] = 1;
            });

            textStats.push({
                line: line,
                words: wordCount,
                chars: chars,
                charsTotal: charsTotal,
                nonchars: nonchars
            });
        });

        textStats.forEach(function(line){
//            var instrument = (Math.floor((Math.random()*119)+1));
//            track.setInstrument(10,instrument.toString(16));

            Object.keys(line.chars).forEach(function(key) {

                var velocity = Math.floor((((line.chars[key]/line.charsTotal)*100)/100)*128) -1;
                if(velocity < 40) {
                    velocity = 100 - velocity;
                }

                var rand = (Math.floor((Math.random()*8)+1)) - 1;

                console.log("Note on [0, " + scale[key.toLowerCase()] + ", " + rand*64 + ", " +  velocity + " ]");

                if( S(key).isUpper() ){
                    track.setInstrument(1, 0x18);
                    track.addNoteOn(1, scale[key.toLowerCase()], rand*64 ,  velocity);
                } else {
                    track.addNoteOn(0, scale[key.toLowerCase()], 0,  velocity);
                }

//        console.log("Node off [0, " + scale[key] + ", " +  64 * line.chars[key] + " ]");

//                track.addNoteOff(0, scale[key.toLowerCase()], 64 * line.chars[key]);
            });

            Object.keys(line.chars).forEach(function(key) {
                if( S(key).isUpper() ){
                    track.addNoteOff(1, scale[key.toLowerCase()], 64 * line.chars[key]);
                } else {
                    track.addNoteOff(0, scale[key.toLowerCase()]);
                }
            });
        });

        var output = "data:audio/midi;base64," + new Buffer(file.toBytes(),'binary').toString("base64");

//        var lady = 'data:audio/midi;base64,TVRoZAAAAAYAAAABAIBNVHJrAABOwgD/UQMHoSAAwRiBQJFQTACQJEwAkFdMAJBcTADBGECRPExAgVBaAIAkWgCAV1oAgFxaQIE8WgDBGIIAkU1gAJBLYACQMEQAkDxPAJBcWgCQOFoAkFdVAJBZYACQLGAAkGNgAJBEYECBTVoAgEtaAIAwWgCAPFoAgFxaAIA4WgCAV1oAgFlaAIAsWgCAY1oAgERaAMEYgwCRRGEAkE1XAJBLXACQNWEAkDNXAJA8YQCQMFcAkERcAJAsXACQWWEAkCdhAJAkXACQV1wAkGxcQIFEWgCATVoAgEtaAIA1WgCAM1oAgDxaAIAwWgCARFoAgCxaAIBZWgCAJ1oAgCRaAIBXWgCAbFoAwRgAkVxhAJA4VACQJF0AkFxQAJApYQCQRF0AkE1dAJAwUACQZWEAkCxdAJBLYQCQSGEAkFlhAJBBYQCQbGFAgVxaAIA4WgCAJFoAgFxaAIApWgCARFoAgE1aAIAwWgCAZVoAgCxaAIBLWgCASFoAgFlaAIBBWgCAbFoAwRiDQJEkYQCQS1wAkCxYAJBcWACQOFgAkFdYAJBNXACQMFgAkDNhAJA8YQCQRGEAkCRhAJBgYQCQWWEAkCdhAJBsYUCBJFoAgEtaAIAsWgCAXFoAgDhaAIBXWgCATVoAgDBaAIAzWgCAPFoAgERaAIAkWgCAYFoAgFlaAIAnWgCAbFoAwRiDQJFcXwCQTVEAkEhYAJAkWACQS18AkGxfAJBcWACQZV8AkDBYAJBXXwCQLF8AwRiDQJEpXwCQRF9AgVxaAIBNWgCASFoAgCRaAIBLWgCAbFoAgFxaAIBlWgCAMFoAgFdaAIAsWkCBKVoAgERaAMEYgQCRJGAAkEtVAJAsVQCQYGAAkFBVAJAkYACQTVUAkGVgAJBcYACQOGAAkDBVAJBEYACQNWBAgSRaAIBLWgCALFoAgGBaAIBQWgCAJFoAgE1aAIBlWgCAXFoAgDhaAIAwWgCARFoAgDVaAMEYg0CRNWAAkCRgAJBvYACQPFUAkEtgAJA1YACQZVsAkDhbAJAwUACQV2AAkFxgAJBEVQCQWWAAkCdgAJBNYECBNVoAgCRaAIBvWgCAPFoAgEtaAIA1WgCAZVoAgDhaAIAwWgCAV1oAgFxaAIBEWgCAWVoAgCdaAIBNWgDBGECRV2AAkE1aAJBgYACQS1UAkCxaAJAkWgCQPGAAkFlgAJBEWgCQXGAAkDhgAJAwVQCQV2AAkCdgAJBlYECBV1oAgE1aAIBgWgCAS1oAgCxaAIAkWgCAPFoAgFlaAIBEWgCAXFoAgDhaAIAwWgCAV1oAgCdaAIBlWgDBGIMAkVxeAJA4VwCQMF4AkDxeAJBZXgCQRFcAkCRXAJBLXgCQLF4AkE1XAJAzXgDBGINAkVleAJBcV0CBXFoAgDhaAIAwWgCAPFoAgFlaAIBEWgCAJFoAgEtaAIAsWgCATVoAgDNaQIFZWgCAXFoAwRiBAJFlYACQPFYAkERbAJBNYACQZVsAkFlWAJA4YACQXGAAkDBWAJBLWwCQJGAAkFBgAJBUYACQYGAAkGNgAJBXYECBZVoAgDxaAIBEWgCATVoAgGVaAIBZWgCAOFoAgFxaAIAwWgCAS1oAgCRaAIBQWgCAVFoAgGBaAIBjWgCAV1oAwRiBQJFEYQCQPFwAkFxcAJBEYQCQME0AkCdhAJBXXACQb2EAkFlXAJAsXACQYGEAkEFhAJAkYQCQS2EAkDhhAJBjYUCBRFoAgDxaAIBcWgCARFoAgDBaAIAnWgCAV1oAgG9aAIBZWgCALFoAgGBaAIBBWgCAJFoAgEtaAIA4WgCAY1oAwRhAkVxhAJA4VwCQV1IAkE1cAJBcVwCQMFIAkGVhAJAkXACQY1wAkGBhAJBLYQCQWWEAkDNhQIFcWgCAOFoAgFdaAIBNWgCAXFoAgDBaAIBlWgCAJFoAgGNaAIBgWgCAS1oAgFlaAIAzWgDBGECRJ18AkGxfAJBcWQCQOFkAkDBTAJA8UwCQWV8AkERfAJAkXwCQS1kAkCxfAJBXWQCQY19AgSdaAIBsWgCAXFoAgDhaAIAwWgCAPFoAgFlaAIBEWgCAJFoAgEtaAIAsWgCAV1oAgGNaAMEYgkCRM18AkERZAJBNTACQZVkAkDxfAJBLWQCQNV8AkCxfAJBcWQDBGINAkSlfAJAkXwCQSF8AkDBfQIEzWgCARFoAgE1aAIBlWgCAPFoAgEtaAIA1WgCALFoAgFxaQIEpWgCAJFoAgEhaAIAwWgDBGIEAkTNhAJBNWQCQYF0AkFdQAJA1XQCQJFQAkGxdAJBlXQCQRF0AkFldAJBLYQCQLGEAkDNhAJBcYQCQMGFAgTNaAIBNWgCAYFoAgFdaAIA1WgCAJFoAgGxaAIBlWgCARFoAgFlaAIBLWgCALFoAgDNaAIBcWgCAMFoAwRgAkU1gAJBjYACQMFUAkFdaAJBEWgCQTU8AkEFgAJAkWgCQWVoAkFBgAJApYACQM1oAkGVgQIFNWgCAY1oAgDBaAIBXWgCARFoAgE1aAIBBWgCAJFoAgFlaAIBQWgCAKVoAgDNaAIBlWgDBGIEAkSRgAJBLWwCQLGAAkFxbAJA4YACQMFAAkFlVAJA8VQCQRFsAkEhgAJAnYACQTWAAkGVgAJBXYECBJFoAgEtaAIAsWgCAXFoAgDhaAIAwWgCAWVoAgDxaAIBEWgCASFoAgCdaAIBNWgCAZVoAgFdaAMEYgkCRXF0AkDhVAJAwXQDBGIJAkURdAJAkVQCQLF0AkGxdAJBNVQCQM10AwRiDQJFZXQCQRF0AkFxVQIFcWgCAOFoAgDBaQIFEWgCAJFoAgCxaAIBsWgCATVoAgDNaQIFZWgCARFoAgFxaAMEYg0CRJ2AAkGxgAJBcYACQOGAAkDBaAJBIYACQJGAAkFdgAJA1YACQPFQAkEtgAJBlWgCQRFQAkE1gAJBjYACQLGBAgSdaAIBsWgCAXFoAgDhaAIAwWgCASFoAgCRaAIBXWgCANVoAgDxaAIBLWgCAZVoAgERaAIBNWgCAY1oAgCxaAMEYg0CRWWAAkERbAJA8WwCQLFsAkDBRAJBcWwCQOFsAkCRWAJBjYACQbGAAkCdgAJBXWwCQNWAAkFlgQIFZWgCARFoAgDxaAIAsWgCAMFoAgFxaAIA4WgCAJFoAgGNaAIBsWgCAJ1oAgFdaAIA1WgCAWVoAwRiBAJEnYACQbGAAkFlUAJBEWgCQTVoAkGVgAJA4WgCQV2AAkDBgAJAkWgCQS1oAkCxaAJBgYACQPGBAgSdaAIBsWgCAWVoAgERaAIBNWgCAZVoAgDhaAIBXWgCAMFoAgCRaAIBLWgCALFoAgGBaAIA8WgDBGECRXGEAkDhYAJAwWACQWVgAkCRdAJBETwCQTWEAkFBhAJAzYQCQPFgAkFxYAJBBYQCQS2EAkCxhQIFcWgCAOFoAgDBaAIBZWgCAJFoAgERaAIBNWgCAUFoAgDNaAIA8WgCAXFoAgEFaAIBLWgCALFoAwRgAkVlfAJBBXwCQPFkAkEhTAJBLWQCQNV8AkCxfAJBNUwCQZV8AkFxZAMEYgQCRKV8AkCRfAJAwXwCQRF9AgVlaAIBBWgCAPFoAgEhaAIBLWgCANVoAgCxaAIBNWgCAZVoAgFxaQIEpWgCAJFoAgDBaAIBEWgDBGINAkSdhAJBgYQCQXFwAkGVcAJA4SgCQTWEAkCRYAJBZYQCQME8AkEtcAJBXXACQY2EAkCxhQIEnWgCAYFoAgFxaAIBlWgCAOFoAgE1aAIAkWgCAWVoAgDBaAIBLWgCAV1oAgGNaAIAsWgDBGIEAkU1hAJBXXACQJFcAkFxTAJA4XACQMEkAkClhAJBZVwCQSGEAkEtXAJAsYUCBTVoAgFdaAIAkWgCAXFoAgDhaAIAwWgCAKVoAgFlaAIBIWgCAS1oAgCxaAMEYgwCRTWAAkFdgAJA8WwCQWVsAkDhbAJAwWwCQQWAAkEtQAJBNYACQZWAAkCRbAJBEVQCQXGAAkCxgQIFNWgCAV1oAgDxaAIBZWgCAOFoAgDBaAIBBWgCAS1oAgE1aAIBlWgCAJFoAgERaAIBcWgCALFoAwRiBAJFcXQCQOFUAkDBdAMEYgUCRRF0AkCRVAJAsXQCQbF0AkE1VAJAzXQDBGINAkVldAJBEXQCQXFVAgVxaAIA4WgCAMFpAgURaAIAkWgCALFoAgGxaAIBNWgCAM1pAgVlaAIBEWgCAXFoAwRiDAJFNYACQS1oAkERaAJBsWgCQV08AkDBPAJAkVQCQUFoAkFlgAJA8YACQNWBAgU1aAIBLWgCARFoAgGxaAIBXWgCAMFoAgCRaAIBQWgCAWVoAgDxaAIA1WgDBGINAkTxgAJBLWgCQJFUAkEhgAJBNYACQNWAAkFxgAJA4YACQME8AkCdaAJBXWgCQLFoAkERgAJBsYECBPFoAgEtaAIAkWgCASFoAgE1aAIA1WgCAXFoAgDhaAIAwWgCAJ1oAgFdaAIAsWgCARFoAgGxaAMEYgwCROGEAkDBNAJAkVwCQV1wAkFlcAJBNXACQS2EAkDVhAJBcXACQOFcAkClcAJBEYQCQbGFAgThaAIAwWgCAJFoAgFdaAIBZWgCATVoAgEtaAIA1WgCAXFoAgDhaAIApWgCARFoAgGxaAMEYggCRM2EAkFdSAJBNYQCQSGEAkFxhAJA4YQCQMFcAkDxXAJBjYQCQZWEAkEtcAJAsYQCQNWEAkClhAJBEXACQJGEAkGxhQIEzWgCAV1oAgE1aAIBIWgCAXFoAgDhaAIAwWgCAPFoAgGNaAIBlWgCAS1oAgCxaAIA1WgCAKVoAgERaAIAkWgCAbFoAwRiCAJEsXwCQTUsAkGVYAJBLXwCQXFEAkDBYAJBXXwCQLF8AwRgAkSlfAJAkXwCQSF8AkERfQIEsWgCATVoAgGVaAIBLWgCAXFoAgDBaAIBXWgCALFpAgSlaAIAkWgCASFoAgERaAMEYgQCRJGEAkEtcAJAsYQCQJ2EAkGxcAJBcXACQOFwAkDBNAJBIYQCQTVwAkFdXAJAkXACQUGEAkGVhQIEkWgCAS1oAgCxaAIAnWgCAbFoAgFxaAIA4WgCAMFoAgEhaAIBNWgCAV1oAgCRaAIBQWgCAZVoAwRgAkVBhAJA8UgCQRFwAkEtXAJA1YQCQWVcAkDhhAJAwXACQJFcAkGNhAJBgYQCQUGEAkCxhAJBXYQCQbGFAgVBaAIA8WgCARFoAgEtaAIA1WgCAWVoAgDhaAIAwWgCAJFoAgGNaAIBgWgCAUFoAgCxaAIBXWgCAbFoAwRhAkURhAJA8TwCQWVMAkFxcAJAwWACQS1wAkDVhAJBlYQCQOFwAkFBhAJBXXADBGIFAkVxhAJAzYQCQJGEAkGxhQIFEWgCAPFoAgFlaAIBcWgCAMFoAgEtaAIA1WgCAZVoAgDhaAIBQWgCAV1pAgVxaAIAzWgCAJFoAgGxaAMEYgQCRRFwAkCRSAJAsXACQbFwAkE1SAJAzXADBGINAkVlcAJA4XACQRFwAkFxSQIFEWgCAJFoAgCxaAIBsWgCATVoAgDNaQIFZWgCAOFoAgERaAIBcWgDBGIFAkVBQAJAkUACQV1AAkFxQAMEYgQCRPClAgVBaAIAkWgCAV1oAgFxagQCBPFoAwRgAkVxhAJA4VwCQME4AkFdhAJBZXACQZWEAkCRXAJBjYQCQJ2EAkGxcAJBLXACQPGEAkDVhAJBcYQCQLFxAgVxaAIA4WgCAMFoAgFdaAIBZWgCAZVoAgCRaAIBjWgCAJ1oAgGxaAIBLWgCAPFoAgDVaAIBcWgCALFoAwRiBQJEkYACQSGAAkCRaAJA1WgCQPFoAkClaAJBlWgCQMGAAkCdgAJBcYACQOGAAkE1aAJBEYACQYGAAkFdgAJBZYACQbGBAgSRaAIBIWgCAJFoAgDVaAIA8WgCAKVoAgGVaAIAwWgCAJ1oAgFxaAIA4WgCATVoAgERaAIBgWgCA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WgCAV1oAgCxaAIAzWgCASFpAgVlaAIA4WgCARFoAgFxaAMEYg0CRWWEAkE1TAJBIWACQMFgAkFxcAJA8YQCQWVgAkCRYAJBXYQCQUGEAkDNhAJAsXACQRFwAkDVhQIFZWgCATVoAgEhaAIAwWgCAXFoAgDxaAIBZWgCAJFoAgFdaAIBQWgCAM1oAgCxaAIBEWgCANVoAwRiCQJEkXwCQS00AkCRNAJAnUwCQTVkAkFxfAJBIXwCQRF8AkDxfAJA1XwCQUF8AkCxfQIEkWgCAS1oAgCRaAIAnWgCATVoAgFxaAIBIWgCARFoAgDxaAIA1WgCAUFoAgCxaAMEYgQCRWWEAkE1hAJBIXACQMFIAkFxhAJA8YQCQWVwAkCRcAJApYQCQYGEAkFdcAJBEXACQbGEAkDhcAJBQYQCQLFxAgVlaAIBNWgCASFoAgDBaAIBcWgCAPFoAgFlaAIAkWgCAKVoAgGBaAIBXWgCARFoAgGxaAIA4WgCAUFoAgCxaAMEYgUCRTWEAkFdYAJBEXACQTVwAkEtYAJA1XACQOGEAkCRYAJA8WACQLFwAkFBhAJAwYQCQKVwAkEhhAJBZYUCBTVoAgFdaAIBEWgCATVoAgEtaAIA1WgCAOFoAgCRaAIA8WgCALFoAgFBaAIAwWgCAKVoAgEhaAIBZWgDBGIEAkTVfAJBNTQCQMFMAkFlfAJAnXwCQbF8AkFxTAJBlXwCQV18AkCxfAMEYgUCRKV8AkCRfAJBIXwCQRF9AgTVaAIBNWgCAMFoAgFlaAIAnWgCAbFoAgFxaAIBlWgCAV1oAgCxaQIEpWgCAJFoAgEhaAIBEWgDBGIMAkSRhAJBLYQCQLGEAkFldAJBNWACQSFgAkDBUAJBcWACQPF0AkDhdAJBXVACQJ2EAkERhAJBgYUCBJFoAgEtaAIAsWgCAWVoAgE1aAIBIWgCAMFoAgFxaAIA8WgCAOFoAgFdaAIAnWgCARFoAgGBaAMEYQJFcYQCQOF0AkDBdAJBBYQCQS1gAkDxYAJA1XQCQXFgAkFlhAJApYQCQTVgAkEhhAJBXYQCQLF0AkGVdAJAkYUCBXFoAgDhaAIAwWgCAQVoAgEtaAIA8WgCANVoAgFxaAIBZWgCAKVoAgE1aAIBIWgCAV1oAgCxaAIBlWgCAJFoAwRgAkVlhAJA4UwCQMFwAkCRXAJBcVwCQS1cA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WgCAUFoAgE1aAIBcWgCAOFoAgCdaAIBXWgCAb1oAgDVaAIBjWgCAWVoAwRiBQJFNXgCQM14AkCdeAJBNVgCQRFYAkCxeAMEYgkCRWV4AkDxeAJBXXgDBGIJAkUReAJAkXgCQS14AkCleAJAwXgCQXF5AgU1aAIAzWgCAJ1oAgE1aAIBEWgCALFpAgVlaAIA8WgCAV1pAgURaAIAkWgCAS1oAgClaAIAwWgCAXFoAwRiCAJEkYQCQV1MAkDBPAJAsXACQKWEAkE1cAJBZXACQQVwAkEtcAJA8YQCQNWEAkDhhAJBcYQCQM2EAkGNhAJBEYUCBJFoAgFdaAIAwWgCALFoAgClaAIBNWgCAWVoAgEFaAIBLWgCAPFoAgDVaAIA4WgCAXFoAgDNaAIBjWgCARFoAwRiCQJFcXgCQTV4AkCRXAJBEVwCQLFcAkGxeAJA8UACQS14AkDhXAJBZVwCQMF5AgVxaAIBNWgCAJFoAgERaAIAsWgCAbFoAgDxaAIBLWgCAOFoAgFlaAIAwWgDBGIMAkVxhAJA4XACQJFwAkFxcAJBZYQCQUGEAkFdhAJBBYQCQRFMAkDBTAJAsXACQTVwAkEthAJBsYQCQZWEAkDNhAJA8YUCBXFoAgDhaAIAkWgCAXFoAgFlaAIBQWgCAV1oAgEFaAIBEWgCAMFoAgCxaAIBNWgCAS1oAgGxaAIBlWgCAM1oAgDxaAMEYgwCRJ18AkDBLAJBZXwCQPF8AkCxfAJBXXwCQSF8AkE1YAJBcUQDBGIEAkVlfAJA4XwCQJF8AkERfQIEnWgCAMFoAgFlaAIA8WgCALFoAgFdaAIBIWgCATVoAgFxaQIFZWgCAOFoAgCRaAIBEWgDBGIIAkVxhAJA4YQCQMEgAkDVcAJBIXACQbGEAkCdhAJBXVwCQPFwAkCxcAJBEXACQXFwAkDNhQIFcWgCAOFoAgDBaAIA1WgCASFoAgGxaAIAnWgCAV1oAgDxaAIAsWgCARFoAgFxaAIAzWgDBGIMAkURhAJA8YQCQQWEAkDBPAJBcXACQTVgAkFlTAJBIYQCQJ2EAkFdcAJAkXACQS2EAkClhAJA4YQCQM2EAkGVhQIFEWgCAPFoAgEFaAIAwWgCAXFoAgE1aAIBZWgCASFoAgCdaAIBXWgCAJFoAgEtaAIApWgCAOFoAgDNaAIBlWgDBGIEAkThfAJBgXwCQS1MAkDVZAJA8XwCQXF8AkDhfAJAwWQCQTV8AkERZAJAsXwDBGECRNV8AkCRZAJBoXwCQbF9AgThaAIBgWgCAS1oAgDVaAIA8WgCAXFoAgDhaAIAwWgCATVoAgERaAIAsWkCBNVoAgCRaAIBoWgCAbFoAwRiCAJFcYACQOGAAkDBRAJAnWwCQV1EAkDxbAJAsYACQRFEAkFlgAJAkYACQS2AAkDVgAJBIYACQbGBAgVxaAIA4WgCAMFoAgCdaAIBXWgCAPFoAgCxaAIBEWgCAWVoAgCRaAIBLWgCANVoAgEhaAIBsWgDBGIFAkSRfAJBZXwCQOF8AkDBTAJBXXwCQTU0AkCxZAJBlXwCQS18AkFxZAMEYgQCRKV8AkCRfAJBIXwCQRF9AgSRaAIBZWgCAOFoAgDBaAIBXWgCATVoAgCxaAIBlWgCAS1oAgFxaQIEpWgCAJFoAgEhaAIBEWgDBGIFAkSRhAJBLWACQLFgAkDNhAJBXXQCQTV0AkEhhAJA4YQCQPF0AkFldAJAnXQCQRFgAkCRdAJBvYQCQKWEAkGBhAJA1YUCBJFoAgEtaAIAsWgCAM1oAgFdaAIBNWgCASFoAgDhaAIA8WgCAWVoAgCdaAIBEWgCAJFoAgG9aAIApWgCAYFoAgDVaAMEYggCRJGAAkEhgAJA8WgCQNVQAkDhaAJBcYACQbGAAkFlgAJBEWgCQY2AAkDBaAJBXYACQJ2AAkGBaAJBLYECBJFoAgEhaAIA8WgCANVoAgDhaAIBcWgCAbFoAgFlaAIBEWgCAY1oAgDBaAIBXWgCAJ1oAgGBaAIBLWgDBGECRJGAAkEtbAJAsWwCQJFsAkFlbAJA4WwCQMFsAkFdQAJBNWwCQPGAAkEhgAJBgWwCQNWBAgSRaAIBLWgCALFoAgCRaAIBZWgCAOFoAgDBaAIBXWgCATVoAgDxaAIBIWgCAYFoAgDVaAMEYgUCRJ18AkDBLAJBZXwCQPF8AkCxfAJBXXwCQSF8AkE1YAJBcUQDBGIFAkVlfAJA4XwCQJF8AkERfQIEnWgCAMFoAgFlaAIA8WgCALFoAgFdaAIBIWgCATVoAgFxaQIFZWgCAOFoAgCRaAIBEWgDBGIJAkSRhAJBEUwCQPGEAkEtcAJBcXACQOFwAkDBPAJAnYQCQYFgAkClhAJBNYQCQLFwAkGVhAJAkYQCQV2FAgSRaAIBEWgCAPFoAgEtaAIBcWgCAOFoAgDBaAIAnWgCAYFoAgClaAIBNWgCALFoAgGVaAIAkWgCAV1oAwRiCQJFcYgCQOFYAkDxiAJApYgCQQWIAkD9iAJAwSgCQZWIAkERWAJAsWgCQWV4AkE1iAJBLYgCQXF4AkCReAJBXYkCBXFoAgDhaAIA8WgCAKVoAgEFaAIA/WgCAMFoAgGVaAIBEWgCALFoAgFlaAIBNWgCAS1oAgFxaAIAkWgCAV1oAwRiCQJFcYQCQOE8AkDBBAJBEXACQSFwAkFxTAJAkXACQS2EAkCxhAJAzYQCQV2FAgVxaAIA4WgCAMFoAgERaAIBIWgCAXFoAgCRaAIBLWgCALFoAgDNaAIBXWgDBGIJAkSdhAJBgXQCQV1kAkEtVAJAsYQCQRF0AkDxdAJBBYQCQMFEAkE1dAJAnYQCQNV0AkDNhAJAkYQCQSGEAkFxdAJA4YUCBJ1oAgGBaAIBXWgCAS1oAgCxaAIBEWgCAPFoAgEFaAIAwWgCATVoAgCdaAIA1WgCAM1oAgCRaAIBIWgCAXFoAgDhaAMEYAJEkXwCQWV8AkDhfAJAwUwCQV18AkE1NAJAsWQCQZV8AkEtfAJBcWQDBGECRKV8AkCRfAJBIXwCQRF9AgSRaAIBZWgCAOFoAgDBaAIBXWgCATVoAgCxaAIBlWgCAS1oAgFxaQIEpWgCAJFoAgEhaAIBEWgDBGINAkSRgAJBZYACQTVsAkDNgAJBcUQCQMFYAkEtbAJA4VgCQV1sAkFBbAJBgYACQRGAAkDxgAJA1YECBJFoAgFlaAIBNWgCAM1oAgFxaAIAwWgCAS1oAgDhaAIBXWgCAUFoAgGBaAIBEWgCAPFoAgDVaAMEYgkCRJ2EAkDBYAJBEXACQTWEAkGVhAJBcUwCQOFwAkFlYAJAkYQCQV1MAkGxhAJApYQCQYGEAkCdhAJA8YQCQNWFAgSdaAIAwWgCARFoAgE1aAIBlWgCAXFoAgDhaAIBZWgCAJFoAgFdaAIBsWgCAKVoAgGBaAIAnWgCAPFoAgDVaAMEYQJFZYQCQTV0AkEhdAJAwUACQJ2EAkCRdAJBXWQCQLF0AkFxZAJA8WQCQRF0AkEthAJA1XQCQOGFAgVlaAIBNWgCASFoAgDBaAIAnWgCAJFoAgFdaAIAsWgCAXFoAgDxaAIBEWgCAS1oAgDVaAIA4WgDBGIEAkUhfAJBNUwCQY1kAkDBZAJBZWQCQV18AkFxTAJA8XwCQRFMAwRiBAJFZXwCQOF8AkCRfQIFIWgCATVoAgGNaAIAwWgCAWVoAgFdaAIBcWgCAPFoAgERaQIFZWgCAOFoAgCRaAMEYggCROGEAkDxZAJBZXQCQJ10AkFdZAJBNWQCQJF0AkCxdAJApYQCQRFkAkDBhAJBlXQCQS10AkGBhAJA1XQCQOGEAkFxhQIE4WgCAPFoAgFlaAIAnWgCAV1oAgE1aAIAkWgCALFoAgClaAIBEWgCAMFoAgGVaAIBLWgCAYFoAgDVaAIA4WgCAXFoAwRiDAJFNYQCQS10AkCdhAJBgYQCQV1UAkDxdAJBZVQCQOFUAkCxdAJBNVQCQY2EAkDBZAJBlYQCQJGEAkFxhQIFNWgCAS1oAgCdaAIBgWgCAV1oAgDxaAIBZWgCAOFoAgCxaAIBNWgCAY1oAgDBaAIBlWgCAJFoAgFxaAMEYgQCRM2EAkFdcAJBNXACQSFwAkGBhAJBLXACQLFwAkDBTAJAkYQCQXFwAkDhYAJA8YQCQWWEAkERcAJAzYQCQZWFAgTNaAIBXWgCATVoAgEhaAIBgWgCAS1oAgCxaAIAwWgCAJFoAgFxaAIA4WgCAPFoAgFlaAIBEWgCAM1oAgGVaAMEYggCROGEAkDxhAJBZVwCQKVcAkE1XAJAkVwCQRFcAkCdhAJBBYQCQYGEAkFdcAJBLYQCQOGEAkDBcAJAsYUCBOFoAgDxaAIBZWgCAKVoAgE1aAIAkWgCARFoAgCdaAIBBWgCAYFoAgFdaAIBLWgCAOFoAgDBaAIAsWgDBGACRJF8AkFlfAJA4XwCQMFMAkFdfAJBNTQCQLFkAkGVfAJBLXwCQXFkAwRgAkSlfAJAkXwCQSF8AkERfQIEkWgCAWVoAgDhaAIAwWgCAV1oAgE1aAIAsWgCAZVoAgEtaAIBcWkCBKVoAgCRaAIBIWgCARFoAwRiDAJEzYQCQV1IAkE1cAJBIXACQXFwAkDhcAJAwVwCQJ2EAkCRcAJBLXACQQWEAkCxhAJAzYQCQPGEAkGNhQIEzWgCAV1oAgE1aAIBIWgCAXFoAgDhaAIAwWgCAJ1oAgCRaAIBLWgCAQVoAgCxaAIAzWgCAPFoAgGNaAMEYQJE4YQCQMFwAkDNhAJBEXACQJFwAkFlcAJA4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AJBsYQCQM10AkGVhAJBLYQCQLGEAkFdhAJA8YQCQNWFAgVxaAIA4WgCAJFoAgFxaAIBEWgCATVoAgFlaAIAwWgCAbFoAgDNaAIBlWgCAS1oAgCxaAIBXWgCAPFoAgDVaAMEYgkCRXGEAkDhYAJAwUwCQRFMAkCRcAJBjYQCQWWEAkGBhAJBQYQCQTWEAkEtcAJBXYQCQM2EAkDxcAJA1XACQXGFAgVxaAIA4WgCAMFoAgERaAIAkWgCAY1oAgFlaAIBgWgCAUFoAgE1aAIBLWgCAV1oAgDNaAIA8WgCANVoAgFxaAMEYggCRXGAAkDhPAJBXYACQTVUAkFxVAJAwVQCQS1oAkDxaAJBZWgCQM2AAkDVgQIFcWgCAOFoAgFdaAIBNWgCAXFoAgDBaAIBLWgCAPFoAgFlaAIAzWgCANVoAwRgAkVlgAJA4YACQMFUAkDNgAJBEWgCQTU8AkCRaAJBcVQCQLFoAkGVgAJBLYADBGIJAkSlgAJBIYECBWVoAgDhaAIAwWgCAM1oAgERaAIBNWgCAJFoAgFxaAIAsWgCAZVoAgEtaQIEpWgCASFoAwRhAkSRhAJBLVwCQLFcAkCRSAJBZYQCQXFwAkDhcAJAwXACQJ2EAkE1XAJBlYQCQYGEAkERhAJA1YUCBJFoAgEtaAIAsWgCAJFoAgFlaAIBcWgCAOFoAgDBaAIAnWgCATVoAgGVaAIBgWgCARFoAgDVaAMEYggCRXGEAkDhdAJAwXQCQZV0AkDxYAJBETwCQTV0AkGxhAJBZXQCQJF0AkEtdAJAsXQCQM2EAkEhhAJA1YUCBXFoAgDhaAIAwWgCAZVoAgDxaAIBEWgCATVoAgGxaAIBZWgCAJFoAgEtaAIAsWgCAM1oAgEhaAIA1WgDBGIFAkVxhAJA4VACQMFQAkGxhAJAkXQCQV1kAkCxhAJBZWQCQPF0AkEtZAJA1WQCQRGEAkFxhAJBNYUCBXFoAgDhaAIAwWgCAbFoAgCRaAIBXWgCALFoAgFlaAIA8WgCAS1oAgDVaAIBEWgCAXFoAgE1aAMEYgQCRXF0AkDhVAJAwXQDBGINAkURdAJAkVQCQLF0AkGxdAJBNVQCQM10AwRiBAJFZXQCQRF0AkFxVQIFcWgCAOFoAgDBaQIFEWgCAJFoAgCxaAIBsWgCATVoAgDNaQIFZWgCARFoAgFxaAMEYgQCR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';
        res.json({ midibase64: output} );
    });


    /**
     var fs = require("fs");
     var S = require('string');

     var fileStats = [];
     var Midi = require('jsmidgen');

     var file = new Midi.File();

     // could have separate tracks ?
     var track = new Midi.Track();

     track.setTempo(120);
     //track.setInstrument(0,0xd);

     file.addTrack(track);

     // scale
     var startNote = 36; // C2
     var interval = 3;
     var scale = {};
     var alphabet = [ 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z' ];
     var notes = 'C C#D D#E E#F F#G G#A A#B ';

     for(var i=0; i < 26; i++){
    var midinote = startNote + (interval*i);
    var octave = Math.floor(midinote/12 -1);
    var note = notes.substring((midinote % 12) * 2, (midinote % 12) *2 + 2);
    scale[alphabet[i]] = note.replace(' ', '') + octave;
}

     //console.log(scale);

     // define a bar and add four notes
     // duration in ticks (128 per beat)
     function addNotesFromText(line){

//    var instrument = (Math.floor((Math.random()*119)+1));
//    track.setInstrument(10,instrument.toString(16));

    Object.keys(line.chars).forEach(function(key) {

        var velocity = Math.floor((((line.chars[key]/line.charsTotal)*100)/100)*128) -1;
        if(velocity < 40) {
            velocity = 100 - velocity;
        }

        var rand = (Math.floor((Math.random()*8)+1)) - 1;

        console.log("Note on [0, " + scale[key.toLowerCase()] + ", " + rand*64 + ", " +  velocity + " ]");

        if( S(key).isUpper() ){
            track.setInstrument(1, 0x18);
            track.addNoteOn(1, scale[key.toLowerCase()], rand*64 ,  velocity);
        } else {
            track.addNoteOn(0, scale[key.toLowerCase()], 0,  velocity);
        }

////        console.log("Node off [0, " + scale[key] + ", " +  64 * line.chars[key] + " ]");
//
//        track.addNoteOff(0, scale[key.toLowerCase()], 64 * line.chars[key]);
    });

    Object.keys(line.chars).forEach(function(key) {
        if( S(key).isUpper() ){
            track.addNoteOff(1, scale[key.toLowerCase()], 64 * line.chars[key]);
        } else {
            track.addNoteOff(0, scale[key.toLowerCase()]);
        }
    });


}

     function readLines(input, lineFunc, cb) {
    var remaining = '';

    input.on('data', function(data) {
        remaining += data;
        var index = remaining.indexOf('\n');
        while (index > -1) {
            var line = remaining.substring(0, index);
            remaining = remaining.substring(index + 1);
            lineFunc(line);
            index = remaining.indexOf('\n');
        }
    });

    input.on('end', function() {
        if (remaining.length > 0) {
            lineFunc(remaining);
        }
        cb(null, fileStats);
    });
}

     function lineStats(data) {
    var wordCount = data.split(" ").length;

    var chars = {};
    var charsTotal = 0;
//    data.toLowerCase().replace( /[^a-z]/g ,"").split("").forEach(function(c){
//        chars[c] ? ++chars[c] : chars[c] = 1; charsTotal++;
//    });
    data.replace( /[^a-zA-Z]/g ,"").split("").forEach(function(c){
        chars[c] ? ++chars[c] : chars[c] = 1; charsTotal++;
    });

    var nonchars = {};
    data.toLowerCase().replace( /[a-z]/g ,"").split("").sort().forEach(function(c){
        nonchars[c] ? ++nonchars[c] : nonchars[c] = 1;
    });

    fileStats.push({
        line: data,
        words: wordCount,
        chars: chars,
        charsTotal: charsTotal,
        nonchars: nonchars
    });
}


     var inputfile = process.argv[2];
     var outputfile = process.argv[3];

     var input = fs.createReadStream(inputfile);
     readLines(input, lineStats, function(err, stats) {
    console.log(stats);
    for(stat in stats){
          addNotesFromText(stats[stat]);
    }
    fs.writeFileSync(outputfile, file.toBytes(), 'binary');
});


     */

};